<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../please-js/please-js.html">
<link rel="import" href="../paper-styles/typography.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">

<!--
`deko-deck`
Deck Element for Deko
@demo demo/index.html 
-->

<dom-module id="deko-deck">
  <template>
    <style>
      :host {
        display: inline-block;
        width:3em;
        font-family: Roboto, Arial, Helvetica, sans-serif;
        font-weight: 300;
      }
      #deck-box {
        opacity: 0.9;
        height: 100vh;
      }
      #deck-box:hover  {
        opacity: 1;
      }
      .rotate {
        top: 70%;
        position: relative;
      }
      svg {
        width: 100%;
        height: 100%;
      }

    </style>
    <a href="[[link]]">
      <div id="deck-box" style="background:[[bg]];color:[[fg]]">

        <div class$="[[alignm]]">
          <svg>
            <text x="0" y="0" fill$="[[fg]]" transform="translate(30) rotate(-90 50 50)">[[name]]</text>
          </svg>
        </div>

      </div>
    </a>
  </template>

</dom-module>
<script>
  Polymer({
    is: 'deko-deck',
    properties: {
      /**
      * Name of the Deck
      */
      name: {
        type: String,
        value: 'Home',
        notify:true,
      },
      /**
      * Link to the Deck url
      */
      link: {
        type: String,
        value: '#',
      },
      /**
      * Background color of the deck
      */
      color: {
        type: String,
        value: 'Red',
      },
      /**
      * If the deck is selected then the title is as the top. By default, it's at the bottom
      */
      selected: {
        type: Boolean,
        value: false,
      },
      /**
      * Alignment up or down
      */
      alignm: {
        type: String,
        value: 'rotate',
      },
      bg:{
        type:String,
        computed:"getBg(name,color)",
      },
      fg:{
        type:String,
        computed:"getFg(bg)",
      },
      size:{
        value:36,
        type:Number,
      },
      email:{
        value:"",
      }
    },
    getBg: function(name,color){
      return color || Please.make_color({from_hash: name})
    },
    getFg: function(bg){
      var c = bg.substring(1);     // strip #
      var rgb = parseInt(c, 16);   // convert rrggbb to decimal
      var r = (rgb >> 16) & 0xff;  // extract red
      var g = (rgb >>  8) & 0xff;  // extract green
      var b = (rgb >>  0) & 0xff;  // extract blue

      var luma = 0.2126 * r + 0.7152 * g + 0.0722 * b; // per ITU-R BT.709

      if (luma > 128) {
        return "#000"
      } else {
        return "#FFF"
      }
    },
    
  })
</script>
